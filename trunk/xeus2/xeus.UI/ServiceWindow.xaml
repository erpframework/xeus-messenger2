<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2006"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    xmlns:xeus2_xeus_Core="clr-namespace:xeus2.xeus.Core"
    xmlns:servicecmd="clr-namespace:xeus2.xeus.Commands"
    x:Class="xeus2.xeus.UI.ServiceWindow"
    Title="xeus2.xeus.UI" Height="600" Width="500"
    SnapsToDevicePixels="True"
    >
  <Window.Resources>
    <ObjectDataProvider x:Key="ServicesDS" d:IsDataSource="True" ObjectType="{x:Type xeus2_xeus_Core:Services}"/>

    <CollectionViewSource x:Key="Services" Source="{Binding Path=Categories, Mode=Default, Source={StaticResource ServicesDS}}">
    </CollectionViewSource>

  </Window.Resources>

	<Window.Background>
		<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
			<GradientStop Color="#FFDFE3E6" Offset="0"/>
			<GradientStop Color="#FFF0F2F5" Offset="1"/>
		</LinearGradientBrush>
	</Window.Background>

  <StackPanel>
  	<DockPanel>
  		<Button Content="Discover" Command="servicecmd:ServiceCommands.DiscoveryServices"
  			CommandParameter="{Binding Path=Text, ElementName=serverJid}" DockPanel.Dock="Right"/>
  		<TextBox x:Name="serverJid"/>
  	</DockPanel>
    <TreeView ItemsSource="{Binding Source={StaticResource Services}}"
              ItemTemplateSelector="{DynamicResource ServiceTemplateSelector}"
              Height="300"
              x:Name="_services" Style="{DynamicResource TreeViewStyleServices}"
              ItemContainerStyle="{DynamicResource TreeViewItemStyleService}" Margin="4,4,4,4" Template="{DynamicResource TreeViewControlTemplate}" />
	<Border>
		<DockPanel>
			<Image Width="48" Height="48"/>
			<StackPanel>
				<TextBlock Text="Services"/>
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="{Binding Path=TotalItemsToDiscover}"/>
					<TextBlock Text="service item found"/>
				</StackPanel>
			</StackPanel>
			<ProgressBar VerticalAlignment="Center" DockPanel.Dock="Right" Maximum="{Binding Path=TotalItemsToDiscover, Mode=OneWay}"
				Value="{Binding Path=ItemsDiscovered, Mode=OneWay}" Style="{DynamicResource ProgressBarStyle}" VerticalContentAlignment="Center"/>
		</DockPanel>
	</Border>
  </StackPanel>
</Window>
